import{d as y,a as s,b as M,o as d,c as p,e as g,F as C,r as F,n as I,f as L,t as k,_ as S,g as $,h as D}from"./index-BwN2_Jze.js";import{r as N}from"./index-CL-EFhig.js";const E=["data-index"],H=y({__name:"VirtualSlide",props:{total:{default:20},list:{default:()=>[]}},setup(m){const l=m,c=s(),r=s(),t=s([]),a=s(0),e=s(0),f=s(0),u=s(0),h=s(0),v=s(document.documentElement.clientHeight);function T(n){f.value=n.touches[0].clientY,h.value=Date.now()}function b(n){if(u.value=n.touches[0].clientY-f.value,e.value===0&&u.value>0)return console.log("上拉刷新");if(e.value===l.total-1&&u.value<0)return console.log("没有更多了");_(u.value-e.value*v.value,"none")}function w(){if(x()){if(u.value>0){if(e.value===0)return;e.value--}if(u.value<0){if(e.value===l.total-1)return;e.value++,e.value>=a.value}}R(),_(-e.value*v.value,"all 0.3s"),V()}function R(){if(x()){const n=e.value<l.total-a.value-1,i=e.value<l.total-a.value-2;if(u.value>0&&i&&(e.value>=a.value||e.value===a.value-1)){const o=e.value-a.value+1;t.value.pop(),t.value.unshift(l.list[o])}if(u.value<0&&n&&e.value>=a.value){const o=e.value-a.value+t.value.length;t.value.shift(),t.value.push(l.list[o])}}}function _(n,i){r.value.style.transition=i,r.value.style.transform=`translateY(${n}px)`}function V(){f.value=0,u.value=0}function Y(){t.value=l.list.slice(0,Math.min(l.total,5)),a.value=Math.floor(t.value.length/2)}function x(){const n=Date.now()-h.value,o=Math.abs(u.value)/n>.5;return Math.abs(u.value)>v.value/2||o}function B(){if(e.value>=a.value){const n=e.value-a.value+1,i=l.total-1-a.value-2,o=Math.min(n,i)*v.value;return`${Math.max(o,0)}px`}return 0}return M(()=>{Y()}),(n,i)=>(d(),p("div",{ref_key:"wrapperRef",ref:c,class:"wrapper",onTouchstart:T,onTouchmove:b,onTouchend:w},[g("div",{ref_key:"listRef",ref:r,class:"list"},[(d(!0),p(C,null,F(t.value,o=>(d(),p("div",{key:o.index,class:"item","data-index":o.index,style:I({top:B(),background:o.background})},[L(k(o.title)+": ",1),g("div",null,"activeIndex："+k(e.value),1)],12,E))),128))],512)],544))}}),z=S(H,[["__scopeId","data-v-b7cb791a"]]),A=y({__name:"slide-demo1",setup(m){const l=s([]),c=s(0);function r(){for(let t=0;t<40;t++)l.value.push({index:t+1,title:`第${t+1}个`,background:N()});c.value=40}return M(()=>{r()}),(t,a)=>c.value?(d(),$(z,{key:0,list:l.value,total:c.value},null,8,["list","total"])):D("",!0)}});export{A as default};
