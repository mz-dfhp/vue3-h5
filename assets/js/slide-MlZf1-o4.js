import{a as v,b as W,e as V,f as Y,g as H,d as D,h as G,o as I,c as $,i as L,F as X,r as q,n as J,j as F,k as K,_ as Q,l as Z,p as ee,w as te,t as ne}from"./index-C-0_erhT.js";var ie=typeof global=="object"&&global&&global.Object===Object&&global,ae=typeof self=="object"&&self&&self.Object===Object&&self,P=ie||ae||Function("return this")(),j=P.Symbol,U=Object.prototype,re=U.hasOwnProperty,oe=U.toString,_=j?j.toStringTag:void 0;function ue(e){var n=re.call(e,_),t=e[_];try{e[_]=void 0;var o=!0}catch{}var u=oe.call(e);return o&&(n?e[_]=t:delete e[_]),u}var le=Object.prototype,se=le.toString;function ce(e){return se.call(e)}var de="[object Null]",fe="[object Undefined]",A=j?j.toStringTag:void 0;function ve(e){return e==null?e===void 0?fe:de:A&&A in Object(e)?ue(e):ce(e)}function me(e){return e!=null&&typeof e=="object"}var xe="[object Symbol]";function ge(e){return typeof e=="symbol"||me(e)&&ve(e)==xe}var he=/\s/;function pe(e){for(var n=e.length;n--&&he.test(e.charAt(n)););return n}var be=/^\s+/;function ye(e){return e&&e.slice(0,pe(e)+1).replace(be,"")}function w(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var N=NaN,Te=/^[-+]0x[0-9a-f]+$/i,_e=/^0b[01]+$/i,Se=/^0o[0-7]+$/i,Ie=parseInt;function z(e){if(typeof e=="number")return e;if(ge(e))return N;if(w(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=w(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=ye(e);var t=_e.test(e);return t||Se.test(e)?Ie(e.slice(2),t?2:8):Te.test(e)?N:+e}var R=function(){return P.Date.now()},je="Expected a function",we=Math.max,ke=Math.min;function Ee(e,n,t){var o,u,m,l,i,f,c=0,p=!1,x=!1,b=!0;if(typeof e!="function")throw new TypeError(je);n=z(n)||0,w(t)&&(p=!!t.leading,x="maxWait"in t,m=x?we(z(t.maxWait)||0,n):m,b="trailing"in t?!!t.trailing:b);function y(r){var a=o,s=u;return o=u=void 0,c=r,l=e.apply(s,a),l}function k(r){return c=r,i=setTimeout(g,n),p?y(r):l}function E(r){var a=r-f,s=r-c,d=n-a;return x?ke(d,m-s):d}function S(r){var a=r-f,s=r-c;return f===void 0||a>=n||a<0||x&&s>=m}function g(){var r=R();if(S(r))return T(r);i=setTimeout(g,E(r))}function T(r){return i=void 0,b&&o?y(r):(o=u=void 0,l)}function O(){i!==void 0&&clearTimeout(i),c=0,o=f=u=i=void 0}function M(){return i===void 0?l:T(R())}function h(){var r=R(),a=S(r);if(o=arguments,u=this,f=r,a){if(i===void 0)return k(f);if(x)return clearTimeout(i),i=setTimeout(g,n),y(f)}return i===void 0&&(i=setTimeout(g,n)),l}return h.cancel=O,h.flush=M,h}var Oe="Expected a function";function B(e,n,t){var o=!0,u=!0;if(typeof e!="function")throw new TypeError(Oe);return w(t)&&(o="leading"in t?!!t.leading:o,u="trailing"in t?!!t.trailing:u),Ee(e,n,{leading:o,maxWait:n,trailing:u})}function Me(){const e=v(0),n=v(0);function t(){e.value=document.documentElement.clientWidth,n.value=document.documentElement.clientHeight}return W(()=>{t(),window.addEventListener("resize",B(t,200))}),V(()=>{window.removeEventListener("resize",t)}),Y(()=>{t(),window.addEventListener("resize",B(t,200))}),H(()=>{window.removeEventListener("resize",t)}),{winWidth:e,winHeight:n}}const $e=["data-index"],Re=D({__name:"VirtualSlide",props:{count:{default:5},total:{default:0},list:{default:()=>[]}},emits:["refresh","load","updateActiveIndex"],setup(e,{emit:n}){const t=e,o=n,u=v(),m=v(),l=v([]),i=v(0),f=v(0),c=v(0),p=v(0),{winHeight:x}=Me(),b=G(()=>(i.value-1)*x.value);function y(a){f.value=a.touches[0].clientY,p.value=Date.now()}function k(a){if(c.value=a.touches[0].clientY-f.value,i.value===0&&c.value>0){o("refresh");return}i.value===t.total-1&&c.value<0||T(c.value-i.value*x.value,"none")}function E(){if(h()){if(c.value>0){if(i.value===0)return;i.value--}if(c.value<0){if(i.value===t.total-1)return;i.value++,i.value+l.value.length>=t.list.length&&S()}}T(-i.value*x.value,"all 0.3s"),g(),J(()=>{o("updateActiveIndex",i.value)}),O()}function S(){o("load")}function g(){if(h()){if(c.value>0&&i.value!==0){const a=l.value[0].index,s=t.list.findIndex(d=>d.index===a);l.value.pop(),l.value.unshift({...s!==-1?t.list[s-1]:{},uuid:r()})}if(c.value<0&&i.value>1&&i.value-1<t.total-1){const a=l.value.slice(-1)[0].index,s=t.list.findIndex(d=>d.index===a);l.value.shift(),l.value.push({...s!==-1?t.list[s+1]:{},uuid:r()})}}}function T(a,s){m.value.style.transition=s,m.value.style.transform=`translateY(${a}px)`}function O(){f.value=0,c.value=0}function M(){i.value=0,l.value=t.list.slice(0,Math.min(t.total,t.count)).map(a=>({...a,uuid:r()}))}function h(){const a=Date.now()-p.value,d=Math.abs(c.value)/a>.5;return Math.abs(c.value)>x.value/2||d}function r(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,a=>{const s=Math.random()*16|0;return(a==="x"?s:s&3|8).toString(16)})}return W(()=>{M(),o("updateActiveIndex",i.value)}),(a,s)=>(I(),$("div",{ref_key:"wrapperRef",ref:u,class:"wrapper",onTouchstart:y,onTouchmove:k,onTouchend:E},[L("div",{ref_key:"listRef",ref:m,class:"list"},[(I(!0),$(X,null,q(l.value,(d,C)=>(I(),$("div",{key:d.uuid,class:"item","data-index":C+i.value,style:F({top:`${Math.max(b.value,0)}px`})},[K(a.$slots,"default",{activeIndex:i.value,data:d},void 0)],12,$e))),128))],512)],544))}}),Le=Q(Re,[["__scopeId","data-v-26d74b40"]]);function We(){return`rgb(${Math.floor(Math.random()*256)}, ${Math.floor(Math.random()*256)}, ${Math.floor(Math.random()*256)})`}const Ae=D({__name:"slide",setup(e){const n=v([]),t=v(0);function o(){for(let u=0;u<10;u++)n.value.push({index:u+1,title:`第${u+1}个`,background:We()});t.value=10}return W(()=>{o()}),(u,m)=>t.value?(I(),Z(Le,{key:0,list:n.value,total:t.value},{default:te(({data:l})=>[L("div",{style:F({background:l.background,height:"100%"})},[L("div",null,ne(l.title),1)],4)]),_:1},8,["list","total"])):ee("",!0)}});export{Ae as default};
